<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/shama/napa">napa (v2.3.0)</a>
</h1>
<h4>A helper for installing repos without a package.json with npm.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.napa">module napa</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.napa">
            function <span class="apidocSignatureSpan"></span>napa
            <span class="apidocSignatureSpan">(url, name, opts)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">napa.</span>cli</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.napa.cli">module napa.cli</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli.cli">
            function <span class="apidocSignatureSpan">napa.</span>cli
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli._loadFromPkg">
            function <span class="apidocSignatureSpan">napa.cli.</span>_loadFromPkg
            <span class="apidocSignatureSpan">(property, defaults)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli.args">
            function <span class="apidocSignatureSpan">napa.cli.</span>args
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli.getref">
            function <span class="apidocSignatureSpan">napa.cli.</span>getref
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli.readpkg">
            function <span class="apidocSignatureSpan">napa.cli.</span>readpkg
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.napa.cli.url">
            function <span class="apidocSignatureSpan">napa.cli.</span>url
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.napa" id="apidoc.module.napa">module napa</a></h1>


    <h2>
        <a href="#apidoc.element.napa.napa" id="apidoc.element.napa.napa">
        function <span class="apidocSignatureSpan"></span>napa
        <span class="apidocSignatureSpan">(url, name, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function NapaPkg(url, name, opts) {
  if (!(this instanceof NapaPkg)) return new NapaPkg(url, name, opts)
  var self = this
  opts = opts || {}
  this.cwd = opts.cwd || process.cwd()
  this.log = opts.log || log
  if (opts['log-level']) this.log.level = opts['log-level']
  this._mock = opts._mock
  this.ref = opts.ref
  this.url = url
  this.name = name
  this.installTo = path.join(this.cwd, 'node_modules', this.name)
  this.useCache = (typeof opts.cache === 'undefined') || opts.cache !== false
  this.cacheTo = cache(
    typeof opts['cache-path'] !== 'string'
      ? tmp
      : path.resolve(this.cwd, opts['cache-path']),
    this.url
  )
  this._napaResolvedKey = '_napaResolved'
  this.saveToPkgJson = opts.save

  Object.defineProperty(self, 'installed', {
    get: function () {
      var existing = path.join(self.installTo, 'package.json')
      return (fs.existsSync(existing) &amp;&amp; require(existing)[self._napaResolvedKey] === url)
    }
  })
  Object.defineProperty(self, 'cached', {
    get: function () { return fs.existsSync(self.cacheTo) }
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.napa.cli" id="apidoc.module.napa.cli">module napa.cli</a></h1>


    <h2>
        <a href="#apidoc.element.napa.cli.cli" id="apidoc.element.napa.cli.cli">
        function <span class="apidocSignatureSpan">napa.</span>cli
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cli = function (args, done) {
  var parsedArgs = minimist(args)
  args = parsedArgs['_']
  var total = 0
  var pkg = napa.readpkg()
  var opts = napa._loadFromPkg('napa-config', {})

  // Add flags to opts
  var flags = parsedArgs
  delete flags['_']
  opts = extend(opts, flags)

  if (pkg) {
    args = args.map(napa.args).concat(pkg)
  } else {
    args = args.map(napa.args)
  }

  args.forEach(function (cmd) {
    total++
    opts.ref = cmd[2]

    var pkg = new Pkg(cmd[0], cmd[1], opts)
    pkg.install(close)
  })

  function close () {
    total--
    if (total &lt; 1 &amp;&amp; typeof done === 'function') {
      return done()
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.napa.cli._loadFromPkg" id="apidoc.element.napa.cli._loadFromPkg">
        function <span class="apidocSignatureSpan">napa.cli.</span>_loadFromPkg
        <span class="apidocSignatureSpan">(property, defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadFromPkg = function (property, defaults) {
  if (typeof defaults === 'undefined') {
    defaults = false
  }

  var pkgPath = path.join(cwd, 'package.json')

  if (!fs.existsSync(pkgPath)) {
    return defaults
  }

  var pkg = require(pkgPath)

  return pkg.hasOwnProperty(property) ? pkg[property] : defaults
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  ['git://github.com/components/handlebars.js', 'handlebars', '']
]
t.deepEqual(actual, expected)
})

test('readconfig', function (t) {
t.plan(1)
var actual = napa.<span class="apidocCodeKeywordSpan">_loadFromPkg</span>('napa-config', {})
t.deepEqual(actual, {'cache': false})
})

test('no-caching', function (t) {
t.plan(1)
var url = 'https://github.com/emberjs/ember.js/archive/v1.7.0.tar.gz'
var pkgName = 'ember'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.napa.cli.args" id="apidoc.element.napa.cli.args">
        function <span class="apidocSignatureSpan">napa.cli.</span>args
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">args = function (str) {
  var url, name
  var split = str.split(':')

  if (split.length === 3) {
    name = split[2]
    url = split.slice(0, 2).join(':')
  } else if (split.length === 2) {
    if (split[1].slice(0, 2) === '//') {
      url = split.join(':')
    } else {
      url = split[0]
      name = split[1]
    }
  } else {
    url = split.join(':')
  }

  if (!name) {
    name = url.slice(url.lastIndexOf('/') + 1)
  }

  return [napa.url(url), name, napa.getref(str)]
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function cleanPkgJson (path, json, name) {
  delete json.napa[name]
  writeJsonFile.sync(path, json, { indent: 2 })
}

test('args', function (t) {
  t.plan(5)
  t.deepEqual(napa.<span class="apidocCodeKeywordSpan">args</span>('user/repo'), ['git://github.com/user/repo'
;, 'repo', ''])
  t.deepEqual(napa.args('https://github.com/user/repo:testing'), ['https://github.com/user/repo', 'testing
', ''])
  t.deepEqual(napa.args('git://github.com/user/repo2'), ['git://github.com/user/repo2', 'repo2', &amp;#
x27;'])
  // when developing on windows, this returns zip, linux is tar.gz
  t.deepEqual(napa.args('angular/angular.js#v1.2.3:angular'), ['https://github.com/angular/angular.js/archive/v1.
2.3.' + ((process.platform === 'win32') ? 'zip' : 'tar.gz'), 'angular', 'v1.2.
3:angular'])
  t.deepEqual(napa.args('https://github.com/angular/angular.js/archive/master.zip:angular'), ['https://github.com
/angular/angular.js/archive/master.zip', 'angular', ''])
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.napa.cli.getref" id="apidoc.element.napa.cli.getref">
        function <span class="apidocSignatureSpan">napa.cli.</span>getref
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getref = function (url) {
  return url.replace(/^[^#]*#?/, '')
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  url = split.join(':')
}

if (!name) {
  name = url.slice(url.lastIndexOf('/') + 1)
}

return [napa.url(url), name, napa.<span class="apidocCodeKeywordSpan">getref</span>(str)]
}

napa.url = function (url) {
if (typeof url !== 'string') {
  if (url.url) url = url.url
  else return false
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.napa.cli.readpkg" id="apidoc.element.napa.cli.readpkg">
        function <span class="apidocSignatureSpan">napa.cli.</span>readpkg
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readpkg = function () {
  var repos = napa._loadFromPkg('napa') || {}

  return Object.keys(repos).map(function (repo) {
    var repoLocation = repos[repo]
    return [napa.url(repoLocation), repo, napa.getref(repoLocation)]
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  assertPkg('https://github.com/yahoo/pure/releases/download/v0.5.0/pure-0.5.0.tar.gz', 'pure', function (result
) {
    t.deepEqual(result, ['download', 'https://github.com/yahoo/pure/releases/download/v0.5.0/pure-0.5.0.tar.gz'
;, path.resolve('node_modules', 'pure')])
  })
})

test('readpkg', function (t) {
  t.plan(1)
  var actual = napa.<span class="apidocCodeKeywordSpan">readpkg</span>()
  var expected = [
    ['git://github.com/foo/repo', 'foo', ''],
    ['https://github.com/emberjs/ember.js/archive/v1.7.0.tar.gz', 'ember', ''],
    ['git://github.com/components/handlebars.js', 'handlebars', '']
  ]
  t.deepEqual(actual, expected)
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.napa.cli.url" id="apidoc.element.napa.cli.url">
        function <span class="apidocSignatureSpan">napa.cli.</span>url
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">url = function (url) {
  if (typeof url !== 'string') {
    if (url.url) url = url.url
    else return false
  }

  if (url.indexOf('#') !== -1) {
    if (url.indexOf('://') === -1) {
      var s = url.split('#')
      url = 'https://github.com/' + s[0] + '/archive/' + s[1]
      if (process.platform === 'win32') url += '.zip'
      else url += '.tar.gz'
    } else {
      url = url.replace(/#.*?$/, '')
    }
  }

  if (url.slice(0, 1) === '/') {
    url = url.slice(1)
  }

  if (url.indexOf('://') === -1) {
    url = 'git://github.com/' + url
  }

  return url
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  url = split.join(':')
}

if (!name) {
  name = url.slice(url.lastIndexOf('/') + 1)
}

return [napa.<span class="apidocCodeKeywordSpan">url</span>(url), name, napa.getref(str)]
}

napa.url = function (url) {
if (typeof url !== 'string') {
  if (url.url) url = url.url
  else return false
}
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>